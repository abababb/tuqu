CREATE TABLE post (id INT AUTO_INCREMENT NOT NULL, postid INT NOT NULL, subject VARCHAR(255) NOT NULL, idate DATETIME NOT NULL, ndate DATETIME NOT NULL, author VARCHAR(40) NOT NULL, examine_status SMALLINT NOT NULL, board SMALLINT DEFAULT 2 NOT NULL, INDEX idx_idate_subject (idate, subject), UNIQUE INDEX postid_unique (postid, board), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE reply (id INT AUTO_INCREMENT NOT NULL, post_id INT NOT NULL, raw_content LONGTEXT DEFAULT NULL, images LONGTEXT DEFAULT NULL, raw_authorname VARCHAR(255) DEFAULT NULL, reply_no INT NOT NULL, author VARCHAR(255) DEFAULT NULL, author_code VARCHAR(255) DEFAULT NULL, reply_time DATETIME DEFAULT NULL, INDEX IDX_FDA8C6E04B89032C (post_id), UNIQUE INDEX postid_replyno_unique (post_id, reply_no), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
ALTER TABLE reply ADD CONSTRAINT FK_FDA8C6E04B89032C FOREIGN KEY (post_id) REFERENCES post (id);
